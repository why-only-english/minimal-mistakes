---

layout: single
title: "[도커] 4. 네트워킹 : 컨테이너 통신"
toc: true
toc_sticky: true
toc_label: " "
categories: Docker_Kubernetes_실전_가이드

---

### 웹 통신하기(WWW)

- 컨테이너는 월드 와이드 웹에 요청을 보낼 수 있다.
- 도커화된 애플리케이션 내부에서 웹 API 및 웹 페이지와 통신할 수 있다.
- 컨테이너나 도커 없이도 작동

> ❓ 그렇다면, 컨테이너 간 통신은 어떻게 작동할까?
> 

`host.docker.internal`

- 도커화된 애플리케이션인 컨테이너의 코드와 로컬 호스트 머신과의 통신을 위해
- localhost를 도커가 이해할 수 있는 도메인으로 대체해야 한다.
- 그것이 바로 `host.docker.internal`

### 컨테이너 간 통신

- **Docker Networks**
    - **도커로 컨테이너 네트워크를 만들 수 있다**
    - 다중 컨테이너가 있을 때 컨테이너 간의 통신을 허용
    - `docker run --network` : 모든 컨테이너를 포함한 하나의 동일한 네트워크가 생성되고 서로 통신할 수 있음
- 네트워크를 사용하여 컨테이너를 실행하려면 직접 컨테이너를 만들어야 함
    - `docker network create` : 새로운 도커 네트워크 생성
    - `docker network ls` : 기존의 모든 네트워크 검사
- 두 개의 컨테이너는 일반적으로 서로 간에 통신할 수 없다.
    
    → 컨테이너 네트워크를 생성하거나 
    
    → 컨테이너 IP를 수동으로 조회
    
    > 컨테이너 네트워크를 통해 두 개 이상의 컨테이너가 서로 간에 통신할 수 있고 컨테이너를 연결하면 포트를 게시할 필요가 없다, 컨테이너 네트워크 내부에서 모든 컨테이너가 서로 자유롭게 통신할 수 있기 때문
    > 
    - 일반적으로 포트 노출은 로컬 호스트 머신이나 컨테이너 외부에서 컨테이너에 연결하려는 경우에만 필요

> 컨테이너가 동일한 네트워크에 있는 경우, 어떻게 서로 통신할 수 있는가?
- 컨테이너 IP 주소 사용 ❌
- 네트워크  생성 시, 주소 이름 미리 정의 ❌
- **컨테이너 이름을 주소로 사용** ⭕
> 

> 시스템에서 컨테이너를 실행할 때(`docker run`을 통해) 이 컨테이너가 WWW와 통신할 수 있는가?
- ⭕ , 디폴트로 컨테이너는 웹에 연결하여 요청을 보낼 수 있음
> 

> 컨테이너에서 실행되는 애플리케이션이 로컬 호스트 머신과 어떻게 통신할 수 있는가?
- `host.docker.internal` 주소를 사용
> 

<aside>
🗒️ 모듈 요약 !!

<br> - 컨테이너는 웹 서버 등에 대한 요청이 항상 가능하다.

<br> - 로컬 호스트 머신에 대한 요청은 host.docker.internal 도메인으로 수행한다.

<br> - IP를 조회하여 컨테이너 간의 요청을 하거나 네트워크를 생성한다.

<br> - 컨테이너 이름을 사용하여 도커에게 번거로운 주소 변환을 맡긴다.

</aside>